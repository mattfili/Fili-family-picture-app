'use strict';

angular.module('FFF', ['ui.router', 'foundation', 'foundation.common', 'ngAnimate', 'ngCookies', 'wu.masonry']).constant('FIRE_URL', 'https://filifamfotos.firebaseIO.com').constant('CLIENT_ID', '5fe903c4adc9d91').constant('secret', '92ebb19487a535daddb7f955425d112d0b4f3032').config(function ($stateProvider, $urlRouterProvider) {
	$urlRouterProvider.when('', '/');
	$urlRouterProvider.otherwise('/landing');

	$stateProvider.state('start', {
		abstract: true,
		templateUrl: 'assets/landing.html'
	}).state('start.dash', {
		url: '/landing',
		views: {
			'login': {
				templateUrl: 'assets/login.html',
				controller: 'loginController',
				controllerAs: 'login'
			}
		}
	}).state('authorizing', {
		url: '/gallery/?code',
		templateUrl: 'assets/login.html',
		controller: function controller($stateParams) {
			console.log($stateParams);
			postToken($stateParams);
		}
	});
}).factory('$imgur', function ($q, $http) {

	var imgur = function imgur(authToken) {
		this.authToken = authToken;
		this.api = 'https://api.imgur.com/3/';
	};

	imgur.prototype = {

		getGallery: function getGallery(section, sort, page, dateRange, showViral) {
			var deferred = $q.defer();
			var galleryEndpoint = this.apiBase + "/gallery";
			if (section !== undefined) {
				galleryEndpoint += "/" + section;
			}
			if (sort !== undefined) {
				galleryEndpoint += "/" + sort;
			}
			if (dateRange !== undefined) {
				galleryEndpoint += "/" + dateRange;
			}
			if (showViral !== undefined) {
				galleryEndpoint += "?showViral=" + showViral;
			}
			$http({
				method: "GET",
				url: galleryEndpoint,
				headers: {
					"Authorization": "Bearer " + this.authToken
				}
			}).success(function (result) {
				deferred.resolve(result);
			}).error(function (error) {
				deferred.reject(error);
			});
			return deferred.promise;
		}
	};

	return imgur;
}).factory('$imgurAuth', function ($q, $http, CLIENT_ID, secret) {

	var imgurAuth = function imgurAuth() {
		this.cID = CLIENT_ID;
		this.auth_url = 'https://api.imgur.com/oauth2/authorize?';
		this.token_url = 'https://api.imgur.com/oauth2/token?';
	};

	imgurAuth.prototype = {

		getAuth: function getAuth(response_type, cb) {
			var deferred = $q.defer();
			var authEndpoint = this.auth_url + "client_id=" + CLIENT_ID;
			if (response_type !== undefined) {
				authEndpoint += "&response_type=" + response_type;
			} else {
				authEndpoint += "&response_type=token";
			}

			cb(authEndpoint);
		},

		postToken: function postToken(stateParams) {
			console.log(stateParams);
			$http({
				method: 'POST',
				url: this.token_url,
				client_id: CLIENT_ID,
				client_secret: secret,
				grant_type: authorization_code,
				code: stateParams.code
			});
		}
	};

	return imgurAuth;
});
//# sourceMappingURL=data:application/json;base64,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OUIsUUFBSSxFQUFFLFdBQVcsQ0FBQyxJQUFJO0lBQ3RCLENBQUMsQ0FBQTtHQUNGO0VBQ0QsQ0FBQTs7QUFFSixRQUFPLFNBQVMsQ0FBQztDQUNqQixDQUFDLENBQUEiLCJmaWxlIjoic3JjL2pzL21haW4uY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ0ZGRicsIFsndWkucm91dGVyJywnZm91bmRhdGlvbicsICdmb3VuZGF0aW9uLmNvbW1vbicsICduZ0FuaW1hdGUnLCAnbmdDb29raWVzJywgJ3d1Lm1hc29ucnknXSlcblxuLmNvbnN0YW50KCdGSVJFX1VSTCcsICdodHRwczovL2ZpbGlmYW1mb3Rvcy5maXJlYmFzZUlPLmNvbScpXG5cbi5jb25zdGFudCgnQ0xJRU5UX0lEJywgJzVmZTkwM2M0YWRjOWQ5MScpXG5cbi5jb25zdGFudCgnc2VjcmV0JywgJzkyZWJiMTk0ODdhNTM1ZGFkZGI3Zjk1NTQyNWQxMTJkMGI0ZjMwMzInKVxuXG4uY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cdCR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCcnLCAnLycpO1xuXHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvbGFuZGluZycpO1xuXG5cdCRzdGF0ZVByb3ZpZGVyXG5cdC5zdGF0ZSgnc3RhcnQnLCB7XG5cdCAgICBhYnN0cmFjdDogdHJ1ZSxcblx0ICAgIHRlbXBsYXRlVXJsOiAnYXNzZXRzL2xhbmRpbmcuaHRtbCcsXG4gIFx0fSlcblx0LnN0YXRlKCdzdGFydC5kYXNoJywge1xuXHRcdHVybDogJy9sYW5kaW5nJyxcblx0ICAgIHZpZXdzOiB7XG5cdCAgICAgICdsb2dpbic6IHtcblx0ICAgICAgICB0ZW1wbGF0ZVVybDogJ2Fzc2V0cy9sb2dpbi5odG1sJyxcblx0ICAgICAgICBjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyJyxcblx0ICAgICAgICBjb250cm9sbGVyQXM6ICdsb2dpbidcblx0ICAgICAgfVxuXHQgICAgfVxuXHR9KVxuXHQuc3RhdGUoJ2F1dGhvcml6aW5nJywge1xuXHRcdHVybDogJy9nYWxsZXJ5Lz9jb2RlJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2Fzc2V0cy9sb2dpbi5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcykge1xuICAgICAgICBcdGNvbnNvbGUubG9nKCRzdGF0ZVBhcmFtcylcbiAgICAgICAgXHRwb3N0VG9rZW4oJHN0YXRlUGFyYW1zKTtcbiAgICAgICAgfVxuXHR9KVxuXG59KVxuXG4uZmFjdG9yeSgnJGltZ3VyJywgZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xuXG5cdHZhciBpbWd1ciA9IGZ1bmN0aW9uKGF1dGhUb2tlbikge1xuXHRcdHRoaXMuYXV0aFRva2VuID0gYXV0aFRva2VuO1xuXHRcdHRoaXMuYXBpID0gJ2h0dHBzOi8vYXBpLmltZ3VyLmNvbS8zLyc7XG5cdH1cblxuXHRpbWd1ci5wcm90b3R5cGUgPSB7XG5cblx0XHRnZXRHYWxsZXJ5OiBmdW5jdGlvbihzZWN0aW9uLCBzb3J0LCBwYWdlLCBkYXRlUmFuZ2UsIHNob3dWaXJhbCkge1xuXHQgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdCAgICAgICAgdmFyIGdhbGxlcnlFbmRwb2ludCA9IHRoaXMuYXBpQmFzZSArIFwiL2dhbGxlcnlcIjtcblx0ICAgICAgICBpZihzZWN0aW9uICE9PSB1bmRlZmluZWQpIHsgZ2FsbGVyeUVuZHBvaW50ICs9IFwiL1wiICsgc2VjdGlvbjsgfVxuXHQgICAgICAgIGlmKHNvcnQgIT09IHVuZGVmaW5lZCkgeyBnYWxsZXJ5RW5kcG9pbnQgKz0gXCIvXCIgKyBzb3J0OyB9XG5cdCAgICAgICAgaWYoZGF0ZVJhbmdlICE9PSB1bmRlZmluZWQpIHsgZ2FsbGVyeUVuZHBvaW50ICs9IFwiL1wiICsgZGF0ZVJhbmdlOyB9XG5cdCAgICAgICAgaWYoc2hvd1ZpcmFsICE9PSB1bmRlZmluZWQpIHsgZ2FsbGVyeUVuZHBvaW50ICs9IFwiP3Nob3dWaXJhbD1cIiArIHNob3dWaXJhbDsgfVxuXHQgICAgICAgICRodHRwKHtcblx0ICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuXHQgICAgICAgICAgICB1cmw6IGdhbGxlcnlFbmRwb2ludCxcblx0ICAgICAgICAgICAgaGVhZGVyczoge1xuXHQgICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIFwiICsgdGhpcy5hdXRoVG9rZW5cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pXG5cdCAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzdWx0KSB7XG5cdCAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0KTtcblx0ICAgICAgICB9KVxuXHQgICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHQgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIFx0fVxuICAgIH1cblxuXHRyZXR1cm4gaW1ndXI7XG59KVxuXG4uZmFjdG9yeSgnJGltZ3VyQXV0aCcsIGZ1bmN0aW9uICgkcSwgJGh0dHAsIENMSUVOVF9JRCwgc2VjcmV0KSB7XG5cblx0dmFyIGltZ3VyQXV0aCA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuY0lEID0gQ0xJRU5UX0lEO1xuXHRcdHRoaXMuYXV0aF91cmwgPSAnaHR0cHM6Ly9hcGkuaW1ndXIuY29tL29hdXRoMi9hdXRob3JpemU/J1xuXHRcdHRoaXMudG9rZW5fdXJsID0gJ2h0dHBzOi8vYXBpLmltZ3VyLmNvbS9vYXV0aDIvdG9rZW4/J1xuXHR9XG5cblx0aW1ndXJBdXRoLnByb3RvdHlwZSA9IHtcblxuXHRcdGdldEF1dGg6IGZ1bmN0aW9uKHJlc3BvbnNlX3R5cGUsIGNiKSB7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHQgICAgICAgIHZhciBhdXRoRW5kcG9pbnQgPSB0aGlzLmF1dGhfdXJsICsgXCJjbGllbnRfaWQ9XCIgKyBDTElFTlRfSUQ7XG5cdCAgICAgICAgaWYocmVzcG9uc2VfdHlwZSAhPT0gdW5kZWZpbmVkKSB7IGF1dGhFbmRwb2ludCArPSBcIiZyZXNwb25zZV90eXBlPVwiICsgcmVzcG9uc2VfdHlwZSB9XG5cdCAgICAgICAgZWxzZXsgYXV0aEVuZHBvaW50ICs9IFwiJnJlc3BvbnNlX3R5cGU9dG9rZW5cIjsgfVxuXG5cdCAgICAgICAgY2IoYXV0aEVuZHBvaW50KTtcblx0ICAgIH0sXG5cblx0ICAgIHBvc3RUb2tlbjogZnVuY3Rpb24oc3RhdGVQYXJhbXMpIHtcblx0ICAgIFx0Y29uc29sZS5sb2coc3RhdGVQYXJhbXMpXG5cdCAgICBcdCRodHRwKHtcblx0ICAgIFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0ICAgIFx0XHR1cmw6IHRoaXMudG9rZW5fdXJsLFxuXHQgICAgXHRcdGNsaWVudF9pZDogQ0xJRU5UX0lELFxuXHQgICAgXHRcdGNsaWVudF9zZWNyZXQ6IHNlY3JldCxcblx0ICAgIFx0XHRncmFudF90eXBlOiBhdXRob3JpemF0aW9uX2NvZGUsXG5cdCAgICBcdFx0Y29kZTogc3RhdGVQYXJhbXMuY29kZVxuXHQgICAgXHR9KVxuXHQgICAgfVxuICAgIH1cblxuXHRyZXR1cm4gaW1ndXJBdXRoO1xufSkiXX0=
